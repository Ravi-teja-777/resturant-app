{% extends "base.html" %}

{% block title %}Contact Us - Ravi Teja's Restaurant{% endblock %}

{% block content %}
<section class="page-header">
    <div class="container">
        <h1>Contact Us</h1>
        <p>We'd love to hear from you</p>
    </div>
</section>

<section class="contact-section">
    <div class="container">
        <div class="contact-grid">
            <!-- Contact Information -->
            <div class="contact-info">
                <h2>Get In Touch</h2>
                <p>Have a question or feedback? Reach out to us using the information below or fill out the contact form.</p>
                
                <div class="contact-details">
                    <div class="contact-item">
                        <div class="contact-icon">üìç</div>
                        <div>
                            <h3>Address</h3>
                            <p>MG Road, Labbipet<br>Vijayawada, Andhra Pradesh<br>India - 520010</p>
                        </div>
                    </div>

                    <div class="contact-item">
                        <div class="contact-icon">üìû</div>
                        <div>
                            <h3>Phone</h3>
                            <p>+91 98765 43210<br>+91 98765 43211</p>
                        </div>
                    </div>

                    <div class="contact-item">
                        <div class="contact-icon">üìß</div>
                        <div>
                            <h3>Email</h3>
                            <p>info@ravitejarestaurant.com<br>support@ravitejarestaurant.com</p>
                        </div>
                    </div>

                    <div class="contact-item">
                        <div class="contact-icon">üïê</div>
                        <div>
                            <h3>Hours</h3>
                            <p>Monday - Sunday<br>11:00 AM - 11:00 PM</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contact Form -->
            <div class="contact-form-container">
                <div class="card">
                    <div class="card-header">
                        <h2>Send Us a Message</h2>
                    </div>
                    <form id="contactForm" class="contact-form">
                        <div class="form-group">
                            <label for="name">Your Name *</label>
                            <input type="text" id="name" name="name" required 
                                   class="form-input" placeholder="Enter your name">
                        </div>

                        <div class="form-group">
                            <label for="email">Email Address *</label>
                            <input type="email" id="email" name="email" required 
                                   class="form-input" placeholder="your@email.com">
                        </div>

                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" name="phone" 
                                   class="form-input" placeholder="Your phone number">
                        </div>

                        <div class="form-group">
                            <label for="message">Message *</label>
                            <textarea id="message" name="message" required rows="5" 
                                      class="form-input" placeholder="How can we help you?"></textarea>
                        </div>

                        <div id="contactMessage" class="message"></div>

                        <button type="submit" class="btn btn-primary btn-block" id="contactBtn">
                            <span class="btn-text">Send Message</span>
                            <span class="btn-loader" style="display: none;">Sending...</span>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
document.getElementById('contactForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const btn = document.getElementById('contactBtn');
    const btnText = btn.querySelector('.btn-text');
    const btnLoader = btn.querySelector('.btn-loader');
    const messageDiv = document.getElementById('contactMessage');
    
    const formData = {
        name: document.getElementById('name').value.trim(),
        email: document.getElementById('email').value.trim(),
        phone: document.getElementById('phone').value.trim(),
        message: document.getElementById('message').value.trim()
    };
    
    // Show loading
    btn.disabled = true;
    btnText.style.display = 'none';
    btnLoader.style.display = 'inline';
    messageDiv.textContent = '';
    messageDiv.className = 'message';
    
    try {
        const response = await fetch('/api/contact', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(formData)
        });
        
        const data = await response.json();
        
        if (response.ok) {
            messageDiv.textContent = data.message;
            messageDiv.className = 'message message-success';
            document.getElementById('contactForm').reset();
        } else {
            messageDiv.textContent = data.error || 'Failed to send message';
            messageDiv.className = 'message message-error';
        }
    } catch (error) {
        messageDiv.textContent = 'Network error. Please try again.';
        messageDiv.className = 'message message-error';
    } finally {
        btn.disabled = false;
        btnText.style.display = 'inline';
        btnLoader.style.display = 'none';
    }
});
</script>
{% endblock %}